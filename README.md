# Интернет-магазин API

Проект представляет собой API для интернет-магазина, включающий функциональность  
управления товарами, их типами и ценами.  

## Оглавление
- [Функциональность](#функциональность)
- [Установка и запуск](#установка-и-запуск)
  - [1. Клонирование репозитория](#1-клонирование-репозитория)
  - [2. Установка зависимостей](#2-установка-зависимостей)
  - [3. Запуск локально](#3-запуск-локально)
  - [4. Запуск с Docker](#4-запуск-с-docker)
- [Команды Makefile](#команды-makefile)
- [API документация](#api-документация)

## Функциональность
Проект реализует API для работы с тремя основными сущностями:
- **Товар (Product)**: содержит название, цену, количество, штрихкод, тип и дату обновления.
- **Тип товара (Type)**: включает название и описание.
- **Цена (Price)**: указана в валюте и с указанием стоимости.

Дополнительно:
- Поддержка CRUD-операций для всех моделей.
- Поиск товаров в админ-панели.
- Метод для уменьшения остатка товара на складе через API.

## Установка и запуск

### 1. Клонирование репозитория
Клонируйте репозиторий с помощью команды:
```
git clone https://github.com/Ydtalel/store.git
```
`cd store`
### 2. Установка зависимостей
Перед установкой зависимостей убедитесь, что на компьютере установлен   
Python 3.12 или новее и PostgreSQL.

`pip install -r requirements.txt`

### 3. Запуск локально
Для локального запуска создайте виртуальную среду и настройте базу данных.

#### Шаги для локального запуска:   
#### Создайте виртуальную среду:   

```
python -m venv .venv
source .venv/bin/activate  # Для Windows используйте .venv\Scripts\activate
```
#### Установите зависимости:

`pip install -r requirements.txt`  

Настройте переменные окружения в файле .env (создайте его в корне проекта):

```
DB_NAME=<your_db_name>
DB_USER=<your_db_user>
DB_PASSWORD=<your_db_password>
DB_HOST=<your_db_host>
DB_PORT=<your_db_port>
```
#### Создайте и примените миграции:
`python manage.py makemigrations`

`python manage.py migrate`

#### Запустите сервер:
`python manage.py runserver`

### 4. Запуск с Docker
Для удобного запуска в контейнере используйте Docker и Docker Compose.  
Убедитесь, что Docker установлен.

#### Шаги для запуска с Docker:
Соберите и запустите контейнеры:

`make run`

Примените миграции в контейнере:

`make migrate`

API будет доступен по адресу http://localhost:8000/api/.

#### Команды Makefile
Проект содержит Makefile для удобного выполнения команд:

`make run` — запуск контейнеров в Docker.  
`make stop` — остановка контейнеров.   
`make migrate` — выполнение миграций в контейнере.  
`make tests` — запуск тестов в контейнере.   
`make linter` — запуск линтера (flake8) в контейнере.   
#### API документация
Документация API доступна по адресу http://localhost:8000/swagger/   
после запуска сервера или контейнера.